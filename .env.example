# Voice Stack Production Environment Configuration
# Copy this file to .env and customize for your deployment

# === CORE DOMAIN SETTINGS ===
# Your Matrix server domain (must match SSL certificate)
SYNAPSE_SERVER_NAME=matrix.byte-box.org

# Report anonymized stats to matrix.org (yes/no)
SYNAPSE_REPORT_STATS=no

# === DATABASE SETTINGS (POSTGRESQL ONLY) ===
POSTGRES_DB=synapse
POSTGRES_USER=synapse
POSTGRES_PASSWORD=your_strong_database_password_here
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# === SECURITY SETTINGS ===
# Admin registration secret
REGISTRATION_SHARED_SECRET=ByteBox_Matrix_2025_SuperSecretKey_Family

# Enable public registration (false = admin only)
ENABLE_REGISTRATION=false

# Enable registration without email verification
ENABLE_REGISTRATION_WITHOUT_VERIFICATION=false

# Allow guest access
ALLOW_GUEST_ACCESS=false

# === TURN SERVER SETTINGS ===
# TURN server secret for media relay
COTURN_STATIC_AUTH_SECRET=ByteBox_TURN_2025_MediaRelaySecret_Secure

# Your server's public IP address or 'auto'
COTURN_EXTERNAL_IP=auto

# TURN server ports
COTURN_PORT=3478
COTURN_TLS_PORT=5349
COTURN_MIN_PORT=49152
COTURN_MAX_PORT=49172

# === ELEMENT WEB SETTINGS ===
# Element version to download
ELEMENT_VERSION=v1.11.86

# Jitsi domain for video calls
ELEMENT_JITSI_DOMAIN=meet.element.io

# Element web interface port
ELEMENT_PORT=8080
ELEMENT_WEB_DIR=/usr/share/nginx/html

# === SERVICE PORTS ===
# Main Synapse server port
SYNAPSE_PORT=8008

# Synapse Admin interface port
SYNAPSE_ADMIN_PORT=8082

# Maubot port (if using bots)
MAUBOT_PORT=29316

# === ADVANCED SETTINGS ===
# Trusted key servers for federation (keeping matrix.org for key validation)
TRUSTED_KEY_SERVERS=["matrix.org"]

# URL preview generation (enabled for better user experience)
URL_PREVIEW_ENABLED=true

# Require identity server (disabled for family use)
REQUIRE_IDENTITY_SERVER=false

# === BACKUP SETTINGS ===
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# Database backup encryption key (generate with: openssl rand -base64 32)
BACKUP_ENCRYPTION_KEY=CHANGEME_backup_encryption_key

# === MONITORING SETTINGS ===
# Log level (INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO